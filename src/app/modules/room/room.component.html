<ng-container *ngIf="room">
  <app-subheader [title]="room.name" [icon]="room.icon"></app-subheader>
  <div class="room--container">
    <div class="room--section-header">
      <p class="room--section-header--title">Items</p>
      <div class="room--section-header--action">
        <p class="room--section-header--action--text" (click)="back()">Back</p>
        <app-default-button class="room--section-header--action--button"
                            [text]="'+'"
                            [buttonSize]="backButtonSize"
                            [buttonType]="backButtonType"
                            [buttonClass]="backButtonClass"
                            [width]="'35px'"
                            [height]="'35px'"
                            [borderRadius]="25"
                            [clickEvent]="getAddItemToRoom()">
        </app-default-button>
      </div>
    </div>
    <div *ngIf="room.items.length === 0; else roomItems" class="room--empty-container">
      <app-section>
        <div class="rooms--empty-data-block">
          <i class="rooms--empty-data--logo icon icon-grid"></i>
          <p class="rooms--empty-data--text">No data could be found</p>
        </div>
      </app-section>
    </div>
  </div>
  <ng-template #roomItems>
    <app-section>
      <h1 class="room-overview--title">Overview</h1>
      <div class="room-overview--group">
        <div class="room--overview--group-element">
          <label>Amount</label>
          <p>{{getTotalItems()}}</p>
        </div>
        <div class="room--overview--group-element">
          <label>Total Cost</label>
          <p>{{getTotalCost()}}</p>
        </div>
        <div class="room--overview--group-element">
          <label>To pay</label>
          <p>{{getToPay()}}</p>
        </div>
      </div>
    </app-section>
    <!--Refactor to component-->
    <app-section>
      <p class="room-overview--items--title">Items</p>
      <div class="room-overview--items">
        <div *ngFor="let item of room.items"
             class="room-overview--items-container {{item.id == selectedItem?.id ? 'selectedItem' : ''}}">
          <div class="room-overview--items-data-block">
            <div class="room-overview--items-name-and-cost-block">
              <p class="room-overview--items-name">{{item.name}}</p>
              <p>{{item.spendedCost + '/' + item.totalCost}}</p>
            </div>
            <div *ngIf="item.id !== selectedItem?.id; else editRoomItem"
                 class="room-overview--items-amount-block__unselected">
              <app-default-button
                [buttonClass]="'icon'"
                [buttonSize]="'small'"
                [buttonType]="'primary'"
                [width]="'30px'"
                [height]="'30px'"
                [icon]="'pencil'"
                [borderRadius]="50"
                [clickEvent]="selectItem(item.id)">
              </app-default-button>
              <p>{{item.amountOwned + '/' + item.amountWanted}}</p>
            </div>
            <ng-template #editRoomItem>
              <div class="room-overview--selected-item-amount-btn">
                <app-default-button
                  [buttonClass]="'icon'"
                  [buttonSize]="'medium'"
                  [buttonType]="'secondary'"
                  [width]="'30px'"
                  [height]="'30px'"
                  [borderRadius]="50"
                  [text]="'+'"
                  [clickEvent]="addItemAmount(item.id)">
                </app-default-button>
                <app-default-button
                  [buttonClass]="'icon'"
                  [buttonSize]="'medium'"
                  [buttonType]="'secondary'"
                  [width]="'30px'"
                  [height]="'30px'"
                  [borderRadius]="50"
                  [text]="'-'"
                  [clickEvent]="reduceItemAmount(item.id)">
                </app-default-button>
              </div>
              <div class="room-overview--items-amount-block__selected">
                <p>{{item.amountOwned + '/' + item.amountWanted}}</p>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </app-section>
  </ng-template>
</ng-container>
